const renderADRolesSection = () => {
    // Only show the section if resource supports AD roles
    const supportsADRoles = ['key_vault', 'storage_account', 'virtual_machine', 'sql_database', 'ai_studio', 'container_registry', 'api_management', 'managed_identity', 'openai'].includes(resource.type);
    if (!supportsADRoles) return null;

    // Get AD roles - prioritize resourceSpecificRoles, fallback to adRoles from global config
    const displayedRoles = config.resourceSpecificRoles || config.adRoles || [];

    return (
      <div className="space-y-4">
        <div className="text-sm font-medium text-gray-700 dark:text-gray-300">
          Azure AD Roles (from Global Configuration)
        </div>
        
        {displayedRoles.length > 0 ? (
          <div className="space-y-2">
            {displayedRoles.map((role: string, index: number) => (
              <div key={index} className="flex items-center justify-between p-2 bg-blue-50 dark:bg-blue-900/20 rounded border border-blue-200 dark:border-blue-700">
                <span className="text-sm font-medium text-blue-700 dark:text-blue-300">{role}</span>
                <Button
                  variant="ghost"
                  size="sm"
                  onClick={() => {
                    // Remove role from this specific resource only
                    const newRoles = displayedRoles.filter((r: string) => r !== role);
                    handleConfigChange('resourceSpecificRoles', newRoles);
                  }}
                  className="h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20"
                  title="Remove role from this resource only"
                >
                  <Trash2 className="h-4 w-4" />
                </Button>
              </div>
            ))}
            <div className="text-xs text-gray-500 dark:text-gray-400 mt-2">
              These roles were set globally. You can remove them from this specific resource without affecting other services.
            </div>
          </div>
        ) : (
          <div className="text-center py-4 text-gray-500 dark:text-gray-400 text-sm bg-gray-50 dark:bg-gray-800 rounded-lg">
            <div className="space-y-2">
              <p>No global AD roles configured</p>
              <p className="text-xs">Configure AD roles in the Global Information panel to apply them to this resource</p>
            </div>
          </div>
        )}
      </div>
    );
  };